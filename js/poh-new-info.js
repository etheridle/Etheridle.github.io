var capitalContractAddress='0xbeedb437a796dfeBf77d16B96f9cDd35918eD8C1'
var tokenContractAddress='0x1ad606adde97c0c28bd6ac85554176bc55783c01'
var reinvestContractAddress='0x2fe54E61a2AF6275d54e04B8952234Ee2F87d9fD'
var currentAddress=null
var capitalContract=null
var tokenContract=null
var reinvestContract=null
var ethPrice=0
var currency=(typeof default_currency==='undefined')?'USD':default_currency
var ethPriceTimer=null
var dataTimer=null
var capitalContractAbi=[{"inputs":[{"internalType":"address payable","name":"_managerAddress","type":"address"},{"internalType":"address payable","name":"_partnerAddress","type":"address"},{"internalType":"address payable","name":"_devAddress","type":"address"},{"internalType":"address payable","name":"_lockAddress","type":"address"},{"internalType":"address","name":"_MoondayToken","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"totalAmount","type":"uint256"}],"name":"FeePayed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"NewDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"}],"name":"Newbie","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"address","name":"referral","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RefBonus","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawn","type":"event"},{"constant":true,"inputs":[],"name":"BASE_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"DEV_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"LOCK_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MANAGER_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"PARTNER_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"PERCENTS_DAILY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"PERCENTS_DIVIDER","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"REFERRAL_PERCENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"TIME_STEP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"devAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lockAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"managerAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"partnerAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalInvested","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalUsers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalWithdrawn","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"referrer","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"invest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserPercentRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserDividends","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserCheckpoint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserReferrer","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserReferralBonus","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserAvailable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"isActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getUserDepositInfo","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserAmountOfDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserTotalDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserTotalWithdrawn","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];var tokenContractAbi=[{"inputs":[],"payable":true,"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"_MOONDAYTokenBalances","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"_Tokendecimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"_Tokenname","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"_Tokensymbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"_allowed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}];var reinvestContractAbi=[{"inputs":[{"internalType":"address","name":"_MoondayToken","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":false,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Reinvested","type":"event"},{"constant":false,"inputs":[],"name":"acceptOwnership","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"moondayFinanceContract","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address payable","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address payable","name":"_moondayFinanceContract","type":"address"}],"name":"setMoondayContractAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"reinvest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];$('.poh-refdiv').text('0.000000 ETH')
$('.poh-refdiv-usd').text(' 0 '+currency)
$('.poh-nonrefdiv').text('0.000000 ETH')
$('.poh-nonrefdiv-usd').text(' 0 '+currency)
$('.poh-div').text('0.000000 ETH')
$('.poh-div-usd').text('0 '+currency)
$('.poh-value').text('0.000000 ETH')
$('.poh-value-usd').text('0 '+currency)
$('.poh-balance').text('0')
if(!String.prototype.format){String.prototype.format=function(){var args=arguments
return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!=='undefined'?args[number]:match})}}
function copyToClipboard(text){if(window.clipboardData&&window.clipboardData.setData){return clipboardData.setData('Text',text)}else if(document.queryCommandSupported&&document.queryCommandSupported('copy')){var textarea=document.createElement('textarea')
textarea.textContent=text
textarea.style.position='fixed'
document.body.appendChild(textarea)
textarea.select()
try{return document.execCommand('copy')}catch(ex){console.warn('Copy to clipboard failed.',ex)
return false}finally{document.body.removeChild(textarea)}}}
function updateEthPrice(){clearTimeout(ethPriceTimer)
if(currency==='EPY'){ethPrice=1/(sellPrice+((buyPrice-sellPrice)/2))
ethPriceTimer=setTimeout(updateEthPrice,10000)}else{$.getJSON('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies='+currency,function(result){for(var key in result.ethereum){var eth=result.ethereum[key]}
ethPrice=parseFloat(eth+currency.toLowerCase())
$('.Ehtprice').text(ethPrice+' '+currency);ethPriceTimer=setTimeout(updateEthPrice,10000)})}}
var net='mainnet';var web3=null;$(window).on("load",async function(){if(typeof ethereum!=='undefined'){web3=new Web3(ethereum);}else if(typeof web3!=='undefined'){web3=new Web3(web3.currentProvider);}else{web3=new Web3(new Web3.providers.HttpProvider('https://'+net+'.infura.io/v3/8998ebe4083e4ff6b33713dfa8939300'));}
await connectWeb3();});async function connectWeb3(){var network=0;network=await web3.eth.net.getId();netID=network.toString();switch(netID){case "1":network='mainnet';break;case "2":network='morden';break;case "3":network='ropsten';break;case "4":network='rinkeby';break;case "5":network='goerli';break;case "42":network='kovan';break;case "246":network='ecw';break;default:console.log('This is an unknown network.');}
if(network.toLowerCase()!==net.toLowerCase()){alert("Please connect your Web3 to "+net+' network');return false;}else{if(typeof ethereum!=='undefined'){ethereum.enable().then(function(){getWeb3Accounts();});}else{getWeb3Accounts();}}}
function getWeb3Accounts(){web3.eth.getAccounts(async function(err,accounts){if(err)alert(err+'. Are you sure you are on a secure (SSL / HTTPS) connection?');if(accounts.length>0){address=accounts[0];var isAddress=web3.utils.isAddress(address);if(isAddress){web3.eth.defaultAccount=accounts[0];currentAddress=web3.eth.defaultAccount;$("#addressLink").val("https://etheridle.github.io/?ref="+currentAddress);capitalContract=new web3.eth.Contract(capitalContractAbi,capitalContractAddress);tokenContract=new web3.eth.Contract(tokenContractAbi,tokenContractAddress);reinvestContract=new web3.eth.Contract(reinvestContractAbi,reinvestContractAddress);isAccount=true;updateData()}}else{alert('Please connect to your Web3 provider!');}});}
window.addEventListener('load',function(){setTimeout(connectWeb3,500)
function stake(amount){amount=web3.utils.toWei(amount);const urlParams=new URLSearchParams(window.location.search);const referer=urlParams.get('ref');$(".transaction-loader").show();tokenContract.methods.approve(capitalContractAddress,amount).send({from:web3.eth.defaultAccount}).on('confirmation',function(confirmationNumber,receipt){if(confirmationNumber===2){capitalContract.methods.invest(referer?referer:"0x0000000000000000000000000000000000000000",amount).send({from:web3.eth.defaultAccount}).on('confirmation',function(confirmation,receipt){if(confirmation===2){$(".transaction-loader").hide();alertify.success('Successfully staked amount : '+web3.utils.fromWei(amount,"ether")+' Moonday Token');}}).on('error',function(error){$(".transaction-loader").hide();alertify.warn('Error : '+error);})}}).on('error',function(error){$(".transaction-loader").hide();alertify.warn('Error : '+error);})}
function unstake(){$(".transaction-loader").show();capitalContract.methods.withdraw().send({from:web3.eth.defaultAccount}).on('confirmation',function(confirmation,receipt){console.log(receipt);if(confirmation===2){$(".transaction-loader").hide();var unstakedAmount=web3.utils.fromWei(receipt.events.Withdrawn.returnValues.amount,"ether");alertify.success('Successfully unstaked amount : '+(unstakedAmount*1).toFixed(4)+' Moonday Token');}}).on('error',function(error){$(".transaction-loader").hide();alertify.warn('Error : '+error);})}
function triggerHodl(){$(".transaction-loader").show();reinvestContract.methods.reinvest().send({from:web3.eth.defaultAccount}).on('confirmation',function(confirmation,receipt){console.log(receipt);if(confirmation===2){$(".transaction-loader").hide();var reinvestedAmount=web3.utils.fromWei(receipt.events.Reinvested.returnValues.amount,"ether");alertify.success('Successfully triggered amount : '+(reinvestedAmount*1).toFixed(4)+' Moonday Token');}}).on('error',function(error){$(".transaction-loader").hide();alertify.warn('Error : '+error);})}
$('#stake').click(function(){let amount=$('#stake-amount').val().trim()
if(amount<=0||!isFinite(amount)||amount===''){$('#stake-amount').addClass('error').popup({title:lang.invalidInput,content:lang.invalidInputResponse}).popup('show')}else{stake(amount)}})
$('#unstake-btn').click(function(){unstake();})
$("#triggerBtn").click(function(){triggerHodl();})
$('#currency').val(currency)
$('#currency').change(function(){currency=$(this).val()
updateEthPrice()})
updateEthPrice()})
function updateData(){clearTimeout(dataTimer)
$("#capitalContractAddress").html(capitalContractAddress);tokenContract.methods.balanceOf(capitalContractAddress).call().then(contractTokenAmount=>{$(".contract-balance").text((web3.utils.fromWei(contractTokenAmount.toString(),'ether')*1).toFixed(4))});web3.eth.getBalance(currentAddress).then(res=>{$('.address-balance').text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4)+' ETH')});capitalContract.methods.totalUsers().call().then(res=>{$(".total-users").text(res);})
capitalContract.methods.getUserPercentRate(currentAddress).call().then(res=>{$(".daily_profit").text(res/10);})
capitalContract.methods.getUserAvailable(currentAddress).call().then(res=>{$(".userAvailable").text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4));})
capitalContract.methods.getUserTotalDeposits(currentAddress).call().then(res=>{$(".userTotalDeposits").text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4));})
capitalContract.methods.getUserTotalDeposits(currentAddress).call().then(res=>{$(".userEarned").text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4));})
capitalContract.methods.getUserTotalWithdrawn(currentAddress).call().then(res=>{$(".userTotalWithdrawn").text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4));})
capitalContract.methods.getUserReferralBonus(currentAddress).call().then(res=>{$(".userRefsEarned").text((web3.utils.fromWei(res.toString(),'ether')*1).toFixed(4));})
dataTimer=setTimeout(function(){updateData()},1000)}
$('#stake-amount').bind("keypress keyup click",function(e){var number=$('#stake-amount').val();if(number){$("#stake").removeAttr('disabled');}else{$("#stake").prop("disabled",true);}})